<!-- Navigation -->
	
	<!-- Background Gradients-->
	<div  class="site-gradients">
		<div class="site-gradients-media">
			<figure>
				<img src="Another%20Yosemite%20short%20movie%20project%20%E2%80%93%20Modern_files/PcLGXNjMTdiFVKTrElCl__DSC2245.jpg" alt="PcLGXNjMTdiFVKTrElCl__DSC2245" srcset="https://themedemos.webmandesign.eu/modern/wp-content/uploads/sites/8/2014/11/PcLGXNjMTdiFVKTrElCl__DSC2245.jpg 1920w, https://themedemos.webmandesign.eu/modern/wp-content/uploads/sites/8/2014/11/PcLGXNjMTdiFVKTrElCl__DSC2245-420x280.jpg 420w, https://themedemos.webmandesign.eu/modern/wp-content/uploads/sites/8/2014/11/PcLGXNjMTdiFVKTrElCl__DSC2245-744x497.jpg 744w, https://themedemos.webmandesign.eu/modern/wp-content/uploads/sites/8/2014/11/PcLGXNjMTdiFVKTrElCl__DSC2245-1200x801.jpg 1200w" sizes="(max-width: 1617px) 100vw, 1617px" height="1080" width="1617">
			</figure>
		</div>
	</div>

	<header class="container">
		<div class="site-branding">
			<h1 class="site-title">
				<a href="/index/index">
					<span>Justice</span>
				</a>
			</h1>
			<h2 class="site-description">Welcome to Us !</h2>
		</div>
	</header>
	
	<!-- /////////////////////////////////////////Content -->
	<div id="page-content" class="single-page">
		<div class="container">
			<div class="row">
				<div id="main-content">
					<article>
						<img src="/images/banner1.jpg" />
						<div class="art-content">
							<h1>swoole基础-进程和线程</h1>
                           <div class="info">By <a href="#">夕夜</a> 10 13, 2017 </div>
                            <p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;"><span style="font-weight: 700;">进程</span></p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">进程和线程，涉及到操作系统的基本知识，但是很多phper不懂，这是实话，因为php简单易学，大部分人在零基础学php编程的时候都没有去了解过这个东西。</p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">既然关系到操作系统，那跟我们学swoole又有什么关系？</p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">这关系可大了去了。如果说这两个概念都搞不清除的话，对于swoole，你能学会几乎可以说是天方夜谭了。</p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">对于操作系统而言，进程就是一个任务，比方说你打开了一个记事本，那就启动了一个进程，打开了两个浏览器，就是另外开启了两个进程，再或者说我现在在word内写文章，打开word也会占用一个进程。也就是说，一个进程至少要干一件事情。</p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">对于linux系统而言，如果你想要查看当前系统中运行着哪些进程，可以通过ps命令进行查看。</p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">比如我现在打开一个终端，用vim打开一个文件</p><pre class="hljs nginx" style="padding: 0.5em; line-height: 1.42857; color: rgb(248, 248, 242); background: rgb(35, 36, 31);"><span class="hljs-title" style="color: rgb(166, 226, 46);">vim</span> a.php</pre><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">打开后这个终端不动，再新打开一个终端，执行ps命令后</p><pre class="hljs perl" style="padding: 0.5em; line-height: 1.42857; color: rgb(248, 248, 242); background: rgb(35, 36, 31);">ps aux | <span class="hljs-keyword" style="color: rgb(249, 38, 114);">grep</span> vim
manks <span class="hljs-number" style="color: rgb(174, 129, 255);">18909</span> <span class="hljs-number" style="color: rgb(174, 129, 255);">0</span>.<span class="hljs-number" style="color: rgb(174, 129, 255);">0</span> <span class="hljs-number" style="color: rgb(174, 129, 255);">0</span>.<span class="hljs-number" style="color: rgb(174, 129, 255);">0</span> <span class="hljs-number" style="color: rgb(174, 129, 255);">2424612</span> <span class="hljs-number" style="color: rgb(174, 129, 255);">468</span> s001  R+ <span class="hljs-number" style="color: rgb(174, 129, 255);">8</span>:<span class="hljs-number" style="color: rgb(174, 129, 255);">37</span>下午 <span class="hljs-number" style="color: rgb(174, 129, 255);">0</span>:<span class="hljs-number" style="color: rgb(174, 129, 255);">00</span>.<span class="hljs-number" style="color: rgb(174, 129, 255);">00</span> <span class="hljs-keyword" style="color: rgb(249, 38, 114);">grep</span> vim
manks <span class="hljs-number" style="color: rgb(174, 129, 255);">18907</span> <span class="hljs-number" style="color: rgb(174, 129, 255);">0</span>.<span class="hljs-number" style="color: rgb(174, 129, 255);">0</span> <span class="hljs-number" style="color: rgb(174, 129, 255);">0</span>.<span class="hljs-number" style="color: rgb(174, 129, 255);">0</span> <span class="hljs-number" style="color: rgb(174, 129, 255);">2454112</span> <span class="hljs-number" style="color: rgb(174, 129, 255);">2192</span> s00<span class="hljs-number" style="color: rgb(174, 129, 255);">0</span> S+ <span class="hljs-number" style="color: rgb(174, 129, 255);">8</span>:<span class="hljs-number" style="color: rgb(174, 129, 255);">37</span>下午 <span class="hljs-number" style="color: rgb(174, 129, 255);">0</span>:<span class="hljs-number" style="color: rgb(174, 129, 255);">00</span>.<span class="hljs-number" style="color: rgb(174, 129, 255);">01</span> vim a.php</pre><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">可以看到，有两个vim相关的进程在我执行ps的那一霎那还在执行。至于ps命令的结果那一堆都是什么意思，没有linux基础的可以回去补补了，这里只需要关注有两个在执行的进程即可。</p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;"><span style="font-weight: 700;">线程</span></p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">有些情况下，一个进程会同时做一些事情，比如说word。它可以同时进行打字、拼写检查等操作。注意这里我们说的同时进行。像这样，在一个进程内部，同时运行着多个“子任务”，我们就可以把这些子任务称之为“线程”。即进程是由多个线程组成的，一个进程至少要有一个线程。实际上，线程是操作系统最小的执行单元。</p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;"><span style="font-weight: 700;">多任务的实现</span></p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">试想一下，如果我们要同时执行多个任务怎么办？</p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">根据上文的理解，我们可以</p><ol style="color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;"><li>启动多个进程</li><li>启动一个进程，并在该进程内启动多个线程</li><li>启动多个进程，每个进程内启动多个线程</li></ol><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;"><span style="font-weight: 700;">多进程的实现</span></p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">有同学要嚷嚷了，这上面说的都是概念性东西，一来抽象，二来怎么玩呢？想动手试试。先不要着急，这就跟我们学习一门新语言一样，心急，基础打不牢，后面问题才会更多！</p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">我们举一个实际点的例子：各位熟悉的apache,其实就是一种多进程实现的案例。当父进程监听到有新的请求时，就会fork出新的子进程来对之进行处理。</p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">Linux的fork()函数通过系统调用即可实现创建一个与原进程几乎相同的进程。对于多任务，通常我们会设计Master-Worker模式，即一个Master进程负责分配任务，多个Worker进程负责执行任务。同理，如果是多线程，Master就是主线程，Worker就是子线程。</p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;"><span style="font-weight: 700;">多进程与多线程的区别</span></p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">多进程的优点就是稳定性很高，如果一个进程挂了，不会影响其他子进程，当然，如果主进程挂了那就都玩完（主进程挂点的可能性微乎其微，后面讲进程模型会说到）。而对于多线程，这个恐怕就是致命的缺点了，因为所有线程共享内存，如果某一个线程挂了，那这个进程几乎就崩溃了。</p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">性能方面，不论是进程还是线程，如果启动太多，无疑都会带来CPU的调度问题，因为进程或者线程的切换，本身就非常耗费资源。数量达到一定程度的时候，CPU和内存就消耗殆尽，电脑就死机了。</p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">举一个例子：使用过windows的用户都知道，如果我们打开的软件越多（开启的进程也就越多），电脑就会越卡，甚至装死机没反应。<br></p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">线程与进程相比，自然是要比进程更轻量一些，而且线程之间是共享内存的，所以不同线程之间的交互就显得容易实现。而对于多进程之间的通信，需要借助消息队列，共享内存等复杂的方式才可以实现。</p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">进程和线程看明白是怎么回事了吗？不明白还请多看几遍，明白后思考一下下面的问题</p><p style="margin-top: 0.8em; margin-bottom: 0.8em; line-height: 1.8; color: rgb(51, 51, 51); font-family: Arial, &quot;Hiragino Sans GB&quot;, 冬青黑, &quot;Microsoft YaHei&quot;, 微软雅黑, SimSun, 宋体, Helvetica, Tahoma, &quot;Arial sans-serif&quot;; font-size: 14px; white-space: normal;">php、nginx、apache各自跟线程和进程是什么关系，可百度，可google，可下面留言。</p><p><br></p>
						</div>
					</article>
					<div class="widget wid-related">
						<div class="heading"><h4>Related Post</h4></div>
						<div class="content">
							<div class="row">
								<div class="col-md-4">
									<div class="wrap-col">
										<a href="#"><img src="/images/7.jpg" /></a>
										<h4><a href="#">Vero eros et accumsan et iusto odio </a></h4>
									</div>
								</div>
								<div class="col-md-4">
									<div class="wrap-col">
										<a href="#"><img src="/images/8.jpg" /></a>
										<h4><a href="#">Vero eros et accumsan et iusto odio </a></h4>
									</div>
								</div>
								<div class="col-md-4">
									<div class="wrap-col">
										<a href="#"><img src="/images/6.jpg" /></a>
										<h4><a href="#">Vero eros et accumsan et iusto odio </a></h4>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
	</div>